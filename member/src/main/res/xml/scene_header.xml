<?xml version="1.0" encoding="utf-8"?><!--
  Copyright (C) 2018 The Android Open Source Project
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
  -->
<MotionScene xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:motion="http://schemas.android.com/apk/res-auto">
<!--    在MotionLayout中，<Transition> 元素用于定义两个约束集之间的过渡动画。每个约束集代表视图在不同状态下的约束条件，而过渡则描述了从一个约束集到另一个约束集的动画效果。<Transition> 元素定义了如何在这两个约束集之间平滑地过渡，并在过渡过程中应用动画效果。-->
<!--    在<Transition> 元素中，您可以设置以下属性：-->
<!--    motion:constraintSetStart：指定过渡开始时的约束集，即动画的起始状态。这是一个引用，指向定义约束集的XML元素。-->
<!--    motion:constraintSetEnd：指定过渡结束时的约束集，即动画的目标状态。同样，这是一个引用。-->
<!--    motion:duration：定义过渡的持续时间，以毫秒为单位。这决定了从起始状态到目标状态的过渡所需的时间。-->
<!--    motion:motionInterpolator：指定动画插值器，即动画在整个过渡过程中如何变化的函数。这可以是线性、加速、减速等不同类型的插值器。-->
<!--    <OnSwipe>：指定触发过渡的用户手势事件，例如滑动手势。您可以定义拖动方向、触摸点锚点等。-->
<!--    <OnClick>：指定触发过渡的点击事件。您可以指定要点击的视图以及触发过渡的点击动作。-->
    <Transition
        motion:constraintSetEnd="@+id/end"
        motion:constraintSetStart="@+id/start"
        motion:duration="1000"
        motion:motionInterpolator="linear">
        <OnSwipe
            motion:dragDirection="dragUp"
            motion:touchAnchorId="@+id/background"
            motion:touchAnchorSide="bottom" />
    </Transition>

    <ConstraintSet android:id="@+id/start">
        <Constraint
            android:id="@+id/background"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:alpha="1.0"
            android:scaleX="1.1"
            android:scaleY="1.1"
            motion:layout_constraintBottom_toBottomOf="parent" />
        <Constraint
            android:id="@+id/ivHead"
            android:layout_width="80dp"
            android:layout_height="80dp"
            android:layout_marginTop="50dp"
            motion:layout_constraintLeft_toLeftOf="parent"
            motion:layout_constraintRight_toRightOf="parent"
            motion:layout_constraintTop_toTopOf="parent" />
        <Constraint
            android:id="@+id/tvUserName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            motion:layout_constraintLeft_toLeftOf="parent"
            motion:layout_constraintRight_toRightOf="parent"
            motion:layout_constraintTop_toBottomOf="@+id/ivHead" />

        <Constraint
            android:id="@+id/llContent"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:alpha="1.0"
            motion:layout_constraintTop_toBottomOf="@+id/tvUserName" />

    </ConstraintSet>

    <ConstraintSet android:id="@+id/end">
        <Constraint
            android:id="@id/background"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:alpha="0"
            android:translationX="0dp"
            android:translationY="100dp"
            motion:layout_constraintBottom_toBottomOf="parent" />
        <Constraint
            android:id="@id/ivHead"
            android:layout_width="80dp"
            android:layout_height="80dp"
            android:scaleX="0.6"
            android:scaleY="0.6"
            android:translationY="8dp"
            motion:layout_constraintBottom_toBottomOf="@+id/background"
            motion:layout_constraintStart_toStartOf="@+id/background" />
        <Constraint
            android:id="@id/tvUserName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="7dp"
            motion:layout_constraintBottom_toBottomOf="@+id/background"
            motion:layout_constraintLeft_toRightOf="@+id/ivHead" />

        <Constraint
            android:id="@+id/llContent"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:alpha="0.0"
            motion:layout_constraintTop_toBottomOf="@+id/tvUserName" />
    </ConstraintSet>
</MotionScene>